# æ¨¡å‹è®­ç»ƒã€è¯„ä¼°å’Œæ¨ç†æµç¨‹

- å¼€å§‹æ¨¡å‹è®­ç»ƒä¹‹å‰ï¼Œè¯·ç¡®è®¤å·²ç»æ­£ç¡®å®‰è£…å¹¶é…ç½®ç¯å¢ƒï¼Œå¦‚æœæ²¡æœ‰ï¼Œè¯·å‚è€ƒ[ç¯å¢ƒå®‰è£…](ç¯å¢ƒå®‰è£….md)é‡Œé¢çš„æŒ‡å¼•å®‰è£…å¿…è¦çš„åº“ã€‚
- æ ¹æ®æ‚¨çš„æ•°æ®åŠåº”ç”¨åœºæ™¯ï¼Œå‚è€ƒ[é€‰å‹æŒ‡å¯¼](../é€‰å‹æŒ‡å¯¼.md)é€‰æ‹©åˆé€‚çš„æ¨¡å‹ã€‚

## å‡†å¤‡æ•°æ®é›†

**ä¸‹è½½æ•°æ®**

å¦‚éœ€è¦è®­ç»ƒ COCO æ•°æ®é›†, æ‚¨å¯ä»¥åœ¨ [COCOå®˜æ–¹ç½‘ç«™](http://cocodataset.org) ä¸‹è½½å›¾ç‰‡æ•°æ®, ç„¶ååœ¨[è¿™é‡Œ](https://github.com/meituan/YOLOv6/releases/download/0.1.0/coco2017labels.zip)ä¸‹è½½è½¬æ¢æˆ YOLO æ ¼å¼çš„æ ‡ç­¾æ–‡ä»¶ï¼›

å¦‚éœ€è¦è®­ç»ƒ VOC æ•°æ®é›†ï¼ŒåŒæ ·éœ€è¦å…ˆä¸‹è½½å¯¹åº”çš„å›¾ç‰‡æ•°æ®å’Œæ ‡ç­¾æ–‡ä»¶ï¼Œå¯ä»ä¸‹é¢çš„é“¾æ¥ä¸‹è½½ã€‚

| dataset          | url                                                          | size   | images |
| ---------------- | ------------------------------------------------------------ | ------ | ------ |
| VOC2007 trainval | [download zip](http://host.robots.ox.ac.uk/pascal/VOC/voc2007/VOCtrainval_06-Nov-2007.tar) | 446MB  | 5012   |
| VOC2007 test     | [download zip](http://host.robots.ox.ac.uk/pascal/VOC/voc2007/VOCtest_06-Nov-2007.tar) | 438MB  | 4953   |
| VOC2012 trainval | [download zip](http://host.robots.ox.ac.uk/pascal/VOC/voc2012/VOCtrainval_11-May-2012.tar) | 1.95GB | 17126  |


**YOLO æ ¼å¼è½¬æ¢**

å¦‚æœæ ‡ç­¾æ–‡ä»¶ä¸æ˜¯ YOLO æ ¼å¼ï¼Œéœ€è¦å…ˆè½¬æ¢æˆ YOLO æ ¼å¼ï¼›

1) YOLO æ ¼å¼å®šä¹‰ï¼š

ä¸€å¼ å›¾ç‰‡å¯¹åº”ä¸€ä¸ªæ ‡ç­¾æ–‡ä»¶ï¼Œä¸”æ ‡æ³¨ä¿¡æ¯çš„æ ¼å¼å¦‚ä¸‹æ‰€ç¤ºï¼š

```json
# ç±»åˆ«id ä¸­å¿ƒç‚¹xåæ ‡ ä¸­å¿ƒç‚¹yåæ ‡ ç›®æ ‡æ¡†å®½åº¦ ç›®æ ‡æ¡†é«˜åº¦
0 0.300926 0.617063 0.601852 0.765873
1 0.575 0.319531 0.4 0.551562
```

- æ¯ä¸€è¡Œä»£è¡¨ä¸€ä¸ªç›®æ ‡æ¡†ä¿¡æ¯ï¼›ç±»åˆ« id ä» 0 å¼€å§‹ï¼›
- ç›®æ ‡æ¡†çš„åæ ‡éœ€è¦è¿›è¡Œå½’ä¸€åŒ–ï¼Œå¦‚æœæ ‡æ³¨ä¿¡æ¯ä¸ºåŸå§‹åƒç´ å€¼ï¼Œä¸­å¿ƒç‚¹xåæ ‡ å’Œ ç›®æ ‡æ¡†å®½åº¦ éœ€è¦é™¤ä»¥ å›¾åƒå®½åº¦ åšå½’ä¸€åŒ–ï¼Œä¸­å¿ƒç‚¹yåæ ‡ å’Œ ç›®æ ‡æ¡†é«˜åº¦ éœ€è¦é™¤ä»¥ å›¾åƒé«˜åº¦ åšå½’ä¸€åŒ–ã€‚

2) YOLO æ ¼å¼è½¬æ¢ï¼š

å¯¹äºå¦‚ VOC çš„ xml æ ¼å¼æ ‡æ³¨æ–‡ä»¶ï¼Œæˆ‘ä»¬æä¾›äº†è½¬æ¢æˆ YOLO æ ¼å¼çš„è„šæœ¬ã€‚
```
python yolov6/data/voc2yolo.py --voc_path your_path/to/VOCdevkit

```

æ­¤å¤–ï¼Œæˆ‘ä»¬è¿˜æä¾›äº†å¯è§†åŒ–è„šæœ¬ï¼Œå¯ç”¨äºæ£€æŸ¥æ•°æ®é›†çš„æ ‡æ³¨ä¿¡æ¯æ˜¯å¦æ­£ç¡®ã€‚
```
python yolov6/data/vis_dataset.py --img_dir your_path/to/VOCdevkit/images/train --label_dir your_path/to/VOCdevkit/labels/train --class_names ['aeroplane', 'bicycle', 'bird', 'boat', 'bottle', 'bus', 'car', 'cat', 'chair', 'cow', 'diningtable', 'dog', 'horse', 'motorbike', 'person', 'pottedplant', 'sheep', 'sofa', 'train', 'tvmonitor']
```

**ç»„ç»‡æ–‡ä»¶å¤¹**

ç¡®ä¿æ‚¨çš„æ•°æ®é›†æŒ‰ç…§ä¸‹é¢è¿™ç§æ ¼å¼æ¥ç»„ç»‡ï¼›

```
# COCO æ•°æ®é›†

â”œâ”€â”€ coco
â”‚   â”œâ”€â”€ annotations
â”‚   â”‚   â”œâ”€â”€ instances_train2017.json
â”‚   â”‚   â””â”€â”€ instances_val2017.json
â”‚   â”œâ”€â”€ images
â”‚   â”‚   â”œâ”€â”€ train2017
â”‚   â”‚   â””â”€â”€ val2017
â”‚   â”œâ”€â”€ labels
â”‚   â”‚   â”œâ”€â”€ train2017
â”‚   â”‚   â”œâ”€â”€ val2017
```
```
# VOC æ•°æ®é›†
# è®­ç»ƒé›†ç»„æˆï¼šVOC2007 å’Œ VOC2012 train+val(16551)
# éªŒè¯é›†ç»„æˆï¼šVOC2007 test(4952)

VOCdevkit
â”œâ”€â”€ images
â”œâ”€â”€ labels
â”œâ”€â”€ voc_07_12 #è½¬æ¢æˆYOLOæ ¼å¼çš„æ•°æ®é›†æ–‡ä»¶å¤¹
â”‚   â”œâ”€â”€ images
â”‚   â”‚   â”œâ”€â”€ train
â”‚   â”‚   â””â”€â”€ val
â”‚   â””â”€â”€ labels
â”‚       â”œâ”€â”€ train
â”‚       â””â”€â”€ val
â”œâ”€â”€ VOC2007
â”‚   â”œâ”€â”€ Annotations
â”‚   â”œâ”€â”€ ImageSets
â”‚   â”œâ”€â”€ JPEGImages
â”‚   â”œâ”€â”€ SegmentationClass
â”‚   â””â”€â”€ SegmentationObject
â””â”€â”€ VOC2012
    â”œâ”€â”€ Annotations
    â”œâ”€â”€ ImageSets
    â”œâ”€â”€ JPEGImages
    â”œâ”€â”€ SegmentationClass
    â””â”€â”€ SegmentationObject

```

## å‡†å¤‡é…ç½®æ–‡ä»¶ 

**åˆ›å»ºæ•°æ®é›†é…ç½®æ–‡ä»¶**

æˆ‘ä»¬æä¾›äº†ä¸€äº›é’ˆå¯¹ [COCO æ•°æ®é›†](https://github.com/meituan/YOLOv6/blob/main/data/coco.yaml)ã€[VOCæ•°æ®é›†](https://github.com/meituan/YOLOv6/blob/main/data/voc.yaml)åŠ[è‡ªå®šä¹‰æ•°æ®é›†](https://github.com/meituan/YOLOv6/blob/main/data/dataset.yaml)ç¤ºä¾‹é…ç½®æ–‡ä»¶ã€‚
ï¼ˆå½“å‰ä»…æ”¯æŒè¯¥æ ¼å¼çš„æ•°æ®é›†è¯»å–ï¼Œåç»­ä¼šç»§ç»­æ”¯æŒæ›´å¤šçš„æ•°æ®é›†ç»„ç»‡æ–¹å¼ã€‚ï¼‰


```
1) éœ€è¦å°†æ•°æ®é›†è·¯å¾„è°ƒæ•´ä¸ºæ‚¨æœºå™¨ä¸Šæ‰€åœ¨çš„è·¯å¾„ï¼Œå»ºè®®ç”¨ç»å¯¹è·¯å¾„ï¼›train/val è·¯å¾„å¿…å¡«ï¼Œtest è·¯å¾„é€‰å¡«ã€‚

2) å¦‚æœæ˜¯ éCOCO æ•°æ®é›†ï¼Œéœ€è¦å°† is_coco è®¾ç½®ä¸º Falseï¼Œä»£ç ä¸­ä¼šæ ¹æ®æ­¤æ ‡å¿—å‚æ•°åˆ¤æ–­æ˜¯å¦éœ€è¦å°†æ•°æ®é›†æ ‡ç­¾æ ¼å¼è½¬æ¢ä¸ºCOCOæ ¼å¼ï¼Œä»¥ä¾¿äºæ¨¡å‹è¯„ä¼°é‡‡ç”¨ pycocotools æ—¶è°ƒç”¨ã€‚
```

**é€‰æ‹©ç½‘ç»œé…ç½®æ–‡ä»¶**

```
1) å¦‚æœæ˜¯è®­ç»ƒ COCO æ•°æ®é›†æˆ–ä¸ COCO å·®å¼‚è¾ƒå¤§çš„æ•°æ®é›†ï¼Œå»ºè®®é€‰ç”¨ yolov6n(/s/m/l).py é…ç½®æ–‡ä»¶ï¼›

2) å¦‚æœæ˜¯è®­ç»ƒ è‡ªå®šä¹‰æ•°æ®é›†ï¼Œå»ºè®®é€‰ç”¨ yolov6n(/s/m/l)_finetune.py é…ç½®æ–‡ä»¶ï¼›

å…³äºé…ç½®æ–‡ä»¶çš„å‚æ•°å®šä¹‰åŠè§£æï¼Œè¯·å‚è€ƒ[é…ç½®æ–‡ä»¶å­¦ä¹ ](é…ç½®æ–‡ä»¶å­¦ä¹ .md)
```

## æ¨¡å‹è®­ç»ƒ

è¿™é‡Œä»¥è®­ç»ƒ YOLOv6-S æ¨¡å‹ä¸ºä¾‹ï¼š

**å•å¡è®­ç»ƒ**

```shell
# P5 models
python tools/train.py --batch 32 --conf configs/yolov6s_finetune.py --data data/dataset.yaml --fuse_ab --device 0
# P6 models
python tools/train.py --batch 32 --conf configs/yolov6s6_finetune.py --data data/dataset.yaml --img 1280 --device 0
```

**å¤šå¡è®­ç»ƒ**ï¼ˆæ¨èä½¿ç”¨ DDP æ¨¡å¼ï¼‰

```shell
# P5 models
python -m torch.distributed.launch --nproc_per_node 8 tools/train.py --batch 256 --conf configs/yolov6s_finetune.py --data data/dataset.yaml --fuse_ab --device 0,1,2,3,4,5,6,7
# P6 models
python -m torch.distributed.launch --nproc_per_node 8 tools/train.py --batch 128 --conf configs/yolov6s6_finetune.py --data data/dataset.yaml --img 1280 --device 0,1,2,3,4,5,6,7
```
å…³é”®å‚æ•°è¯´æ˜ï¼š(å¯åœ¨train.pyé‡ŒæŸ¥çœ‹æ‰€æœ‰å‚æ•°å®šä¹‰)
```
- fuse_ab: å¢åŠ anchor-basedé¢„æµ‹åˆ†æ”¯å¹¶å¼€å¯é”šç‚¹è¾…åŠ©è®­ç»ƒæ¨¡å¼ (P6æ¨¡å‹æš‚ä¸æ”¯æŒæ­¤åŠŸèƒ½)
- conf: å®šä¹‰ç½‘ç»œå’Œè¶…å‚çš„é…ç½®æ–‡ä»¶ï¼Œå¦‚æœæ˜¯è®­ç»ƒè‡ªå®šä¹‰æ•°æ®é›†ï¼Œä½¿ç”¨åç¼€å¸¦finetuneçš„é…ç½®æ–‡ä»¶ï¼Œå¹¶åœ¨é…ç½®æ–‡ä»¶pretrainedå‚æ•°æŒ‡å®šé¢„è®­ç»ƒæ¨¡å‹æƒé‡çš„è·¯å¾„ï¼›
- batch: è®­ç»ƒæ•°æ®æ‰¹å¤§å°ï¼Œå¦‚æœæ˜¾å¡å†…å­˜ä¸è¶³ï¼Œå¯é€‚å½“è°ƒä½è¯¥å€¼ï¼›
- check-images å’Œ check-labels: ç”¨äºåˆå§‹åŒ–æ•°æ®é›†æ—¶æ£€æŸ¥å›¾ç‰‡å’Œæ ‡ç­¾æ–‡ä»¶æ ¼å¼æ˜¯å¦æ­£ç¡®ï¼Œå¹¶ç”Ÿæˆç¼“å­˜æ–‡ä»¶ï¼Œä¸€èˆ¬é¦–æ¬¡è®­ç»ƒæˆ–ç”±äºæ•°æ®é›†é—®é¢˜å¯¼è‡´è®­ç»ƒæ›¾ç»ä¸­æ–­è€Œå†æ¬¡è®­ç»ƒæ—¶éœ€è¦æ·»åŠ è¿™ä¸¤ä¸ªå‚æ•°ï¼›
- write_trainbatch_tb: ç”¨äºåœ¨tensorboardå¯è§†åŒ–è®­ç»ƒæ•°æ®é›†çš„é¢„æµ‹ç»“æœï¼Œå¯¹è®­ç»ƒé€Ÿåº¦ç¨æœ‰å½±å“ï¼Œæ ¹æ®ä¸ªäººéœ€è¦æ·»åŠ ï¼›
- distill: å¼€å¯logitè’¸é¦è®­ç»ƒï¼Œæ­é…teacher_model_pathå‚æ•°å…±åŒä½¿ç”¨ï¼Œé€šè¿‡teacher_model_pathå‚æ•°æŒ‡å®šæ•™å¸ˆç½‘ç»œçš„æ¨¡å‹æƒé‡è·¯å¾„ï¼›éœ€è¦å…ˆå®Œæˆæ•™å¸ˆç½‘ç»œçš„è®­ç»ƒåä½¿ç”¨ï¼›
- distill_featï¼šå¼€å¯featè’¸é¦è®­ç»ƒï¼Œä»…åœ¨é‡åŒ–æ„ŸçŸ¥è®­ç»ƒæ—¶ä¸distillå‚æ•°åŒæ—¶ä½¿ç”¨ï¼Œå¸¸è§„è‡ªè’¸é¦è®­ç»ƒé»˜è®¤ä¸å¼€å¯ï¼›
- resume: ç”¨äºä¸Šä¸€æ¬¡è®­ç»ƒè¢«ä¸­æ–­åéœ€è¦æ¢å¤è®­ç»ƒä½¿ç”¨ï¼›
```

<details>
<summary> å¦‚æœéœ€è¦åœ¨ COCO æ•°æ®é›†ä¸Š å¤ç° æˆ‘ä»¬çš„ç²¾åº¦æŒ‡æ ‡ï¼Œè¯·å‚è€ƒä»¥ä¸‹é…ç½®ï¼ˆå¯å±•å¼€ï¼‰ </summary>

YOLOv6-N ğŸ”½

```shell
# Step 1: Training a base model
# Be sure to open use_dfl mode in config file (use_dfl=True, reg_max=16)

python -m torch.distributed.launch --nproc_per_node 8 tools/train.py \
									--batch 128 \
									--conf configs/yolov6n.py \
									--data data/coco.yaml \
									--epoch 300 \
									--fuse_ab \
									--device 0,1,2,3,4,5,6,7 \
									--name yolov6n_coco

# Step 2: Self-distillation training
python -m torch.distributed.launch --nproc_per_node 8 tools/train.py \
									--batch 128 \
									--conf configs/yolov6n.py \
									--data data/coco.yaml \
									--epoch 300 \
									--device 0,1,2,3,4,5,6,7 \
									--distill \
									--teacher_model_path runs/train/yolov6n_coco/weights/best_ckpt.pt \
									--name yolov6n_coco
```


YOLOv6-S/M/L ğŸ”½

```shell
# Step 1: Training a base model
# Be sure to open use_dfl mode in config file (use_dfl=True, reg_max=16)

python -m torch.distributed.launch --nproc_per_node 8 tools/train.py \
									--batch 256 \
									--conf configs/yolov6s.py \ # yolov6m/yolov6l
									--data data/coco.yaml \
									--epoch 300 \
									--fuse_ab \
									--device 0,1,2,3,4,5,6,7 \
									--name yolov6s_coco # yolov6m_coco/yolov6l_coco

# Step 2: Self-distillation training
python -m torch.distributed.launch --nproc_per_node 8 tools/train.py \
									--batch 256 \ # 128 for distillation of yolov6l
									--conf configs/yolov6s.py \ # yolov6m/yolov6l
									--data data/coco.yaml \
									--epoch 300 \
									--device 0,1,2,3,4,5,6,7 \
									--distill \
									--teacher_model_path runs/train/yolov6s_coco/weights/best_ckpt.pt \
									--name yolov6s_coco # yolov6m_coco/yolov6l_coco

```

YOLOv6-N6/S6 ğŸ”½

```shell
python -m torch.distributed.launch --nproc_per_node 8 tools/train.py \
									--batch 128 \
									--img 1280 \
									--conf configs/yolov6s6.py \ # yolov6n6
									--data data/coco.yaml \
									--epoch 300 \
									--bs_per_gpu 16 \
									--device 0,1,2,3,4,5,6,7 \
									--name yolov6s6_coco # yolov6n6_coco

```


YOLOv6-M6/L6 ğŸ”½

```shell
# Step 1: Training a base model
python -m torch.distributed.launch --nproc_per_node 8 tools/train.py \
									--batch 128 \
									--conf configs/yolov6l6.py \ # yolov6m6
									--data data/coco.yaml \
									--epoch 300 \
									--bs_per_gpu 16 \
									--device 0,1,2,3,4,5,6,7 \
									--name yolov6l6_coco # yolov6m6_coco

# Step 2: Self-distillation training
python -m torch.distributed.launch --nproc_per_node 8 tools/train.py \
									--batch 128 \ 
									--conf configs/yolov6l6.py \ # yolov6m6
									--data data/coco.yaml \
									--epoch 300 \
									--bs_per_gpu 16 \
									--device 0,1,2,3,4,5,6,7 \
									--distill \
									--teacher_model_path runs/train/yolov6l6_coco/weights/best_ckpt.pt \
									--name yolov6l6_coco # yolov6m6_coco
```
</details>

**æ¢å¤è®­ç»ƒ**

å¦‚æœæ‚¨çš„è®­ç»ƒè¿›ç¨‹ä¸­æ–­äº†ï¼Œæ‚¨å¯ä»¥è¿™æ ·æ¢å¤å…ˆå‰çš„è®­ç»ƒè¿›ç¨‹ã€‚
```
# å•å¡è®­ç»ƒ
python tools/train.py --resume
# å¤šå¡è®­ç»ƒ
python -m torch.distributed.launch --nproc_per_node 8 tools/train.py --resume
```
ä¸Šé¢çš„å‘½ä»¤å°†è‡ªåŠ¨åœ¨ YOLOv6 å½“å‰è®­ç»ƒä¿å­˜ç›®å½•ä¸­æ‰¾åˆ°æœ€è¿‘ä¿å­˜çš„æ¨¡å‹ï¼Œç„¶åæ¢å¤è®­ç»ƒã€‚

æ‚¨ä¹Ÿå¯ä»¥é€šè¿‡ `--resume` å‚æ•°æŒ‡å®šè¦æ¢å¤çš„æ¨¡å‹è·¯å¾„ï¼Œè¿™ç§æ–¹å¼ä¼šä»æ‚¨æä¾›çš„æ¨¡å‹è·¯å¾„æ¢å¤è®­ç»ƒã€‚

```
# è¯·å°† /path/to/your/checkpoint/path  æ›¿æ¢ä¸ºæ‚¨è¦æ¢å¤è®­ç»ƒçš„æ¨¡å‹æƒé‡è·¯å¾„
--resume /path/to/your/checkpoint/path
```

**è®­ç»ƒè¿‡ç¨‹å¯è§†åŒ–**

ä½¿ç”¨ `tensorboard` å¯è§†åŒ– è®­ç»ƒæ•°æ®/ éªŒè¯æ•°æ® çš„é¢„æµ‹ç»“æœ ä»¥åŠ loss/mAP æ›²çº¿ï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š
```
tensorboard --logdir=your_path/to/log 

```
æ‰“å¼€å¯¹åº”çš„ç½‘é¡µä¹‹åï¼Œå¯ä»¥çœ‹åˆ° loss/mAP æ›²çº¿ï¼›
<p align="center">
  <img src="https://raw.githubusercontent.com/meituan/YOLOv6/dbfd795a316e6e3a093bb04415e5ab32cf8780b3/assets/voc_loss_curve.jpg" align="middle" width = "800" />
</p>

å¦‚æœéœ€è¦å¯è§†åŒ–è®­ç»ƒæ•°æ®çš„é¢„æµ‹ç»“æœï¼Œéœ€è¦åœ¨è®­ç»ƒå¯åŠ¨å‘½ä»¤ä¸­æ·»åŠ å‚æ•° `--write_trainbatch_tb `

<p align="center">
  <img src="https://raw.githubusercontent.com/meituan/YOLOv6/dbfd795a316e6e3a093bb04415e5ab32cf8780b3/assets/train_batch.jpg" align="middle" width = "800" />
</p>


## æ¨¡å‹è¯„ä¼°

æ¨¡å‹åœ¨éªŒè¯é›†/æµ‹è¯•é›†ä¸Šè¿›è¡Œç²¾åº¦/é€Ÿåº¦è¯„ä¼°ï¼š

```shell
python tools/eval.py --data data/coco.yaml --batch 32 --weights yolov6s.pt --task val/test/speed 
```

å…³é”®å‚æ•°è¯´æ˜ï¼š(å¯åœ¨eval.pyé‡ŒæŸ¥çœ‹æ‰€æœ‰å‚æ•°å®šä¹‰)
```
- task: é€šè¿‡taskå‚æ•°æŒ‡å®šè¯„ä¼°ä»»åŠ¡ï¼Œvalè¡¨ç¤ºåœ¨éªŒè¯é›†ä¸Šè¯„ä¼°ç²¾åº¦ï¼Œtestè¡¨ç¤ºåœ¨æµ‹è¯•é›†ä¸Šè¯„ä¼°ç²¾åº¦ï¼Œspeedè¡¨ç¤ºåœ¨éªŒè¯é›†ä¸Šè¯„ä¼°é€Ÿåº¦ï¼›
- do_coco_metric: è®¾ç½® True / False æ¥æ‰“å¼€æˆ–å…³é—­ pycocotools çš„è¯„ä¼°ï¼Œä¸€èˆ¬ç”¨æ­¤æ–¹å¼è¯„ä¼°çš„ç»“æœè¾ƒå‡†ç¡®ï¼Œä½†é€Ÿåº¦ç¨æ…¢ï¼Œé»˜è®¤æ‰“å¼€ï¼›
- do_pr_metric: è®¾ç½® True / False æ¥æ˜¾ç¤ºæˆ–ä¸æ˜¾ç¤ºç²¾åº¦å’Œå¬å›çš„æŒ‡æ ‡ï¼Œé»˜è®¤å…³é—­ï¼Œå¯æ ¹æ®ä¸ªäººéœ€è¦å¼€å¯ï¼›
- reproduce_640_eval: å¯å¤ç°COCOä¸Šçš„ç²¾åº¦æŒ‡æ ‡æ‰€ä½¿ç”¨çš„é…ç½®ï¼Œå…·ä½“å¯åœ¨[eval_640_repro.py](https://github.com/meituan/YOLOv6/blob/main/configs/experiment/yolov6n_with_eval_params.py)æ­¤é…ç½®æ–‡ä»¶ä¸­æŸ¥çœ‹ç›¸å…³çš„å‚æ•°é…ç½®;
- verbose: å¦‚æœè¦æ‰“å°æ¯ä¸€ä¸ªç±»åˆ«çš„ç²¾åº¦ä¿¡æ¯ï¼Œå¯è®¾ç½®ä¸º Trueï¼›
- config-file: é€‰ç”¨å‚æ•°ï¼Œç”¨äºæŒ‡å®šåŒ…å«æ‰€æœ‰è¯„ä¼°å‚æ•°çš„é…ç½®æ–‡ä»¶ï¼Œå…·ä½“å¯è§[yolov6n_with_eval_params.py](https://github.com/meituan/YOLOv6/blob/main/configs/experiment/yolov6n_with_eval_params.py) ç¤ºä¾‹æ–‡ä»¶ï¼›
```

<details>
<summary> åœ¨ COCO val2017 æ•°æ®é›†ä¸Šå¤ç°æˆ‘ä»¬çš„ç»“æœï¼ˆè¾“å…¥åˆ†è¾¨ç‡ 640x640 æˆ– 1280x1280ï¼‰ </summary>

```shell
# P5 models
python tools/eval.py --data data/coco.yaml --batch 32 --weights yolov6s.pt --task val --reproduce_640_eval
# P6 models
python tools/eval.py --data data/coco.yaml --batch 32 --weights yolov6s6.pt --task val --reproduce_640_eval --img 1280
```
</details>


## æ¨¡å‹æ¨ç†

**æ­¥éª¤ 0.** ä» [YOLOv6å®˜æ–¹github](https://github.com/meituan/YOLOv6/releases/tag/0.2.1)  ä¸‹è½½ä¸€ä¸ªè®­ç»ƒå¥½çš„æ¨¡å‹æƒé‡æ–‡ä»¶ï¼Œæˆ–é€‰æ‹©æ‚¨è‡ªå·±è®­ç»ƒçš„æ¨¡å‹ï¼›

**æ­¥éª¤ 1.** é€šè¿‡ `tools/infer.py`æ–‡ä»¶è¿›è¡Œæ¨ç†ã€‚

```shell
# P5 models
python tools/infer.py --weights yolov6s.pt --source img.jpg / imgdir / video.mp4
# P6 models
python tools/infer.py --weights yolov6s6.pt --img-size 1280 1280 --source img.jpg / imgdir / video.mp4
```
å…³é”®å‚æ•°è¯´æ˜ï¼š(å¯åœ¨eval.pyé‡ŒæŸ¥çœ‹æ‰€æœ‰å‚æ•°å®šä¹‰)
```
- source: ç”¨äºæŒ‡å®šéœ€è¦æ¨ç†çš„å›¾ç‰‡æˆ–è§†é¢‘ï¼Œæ”¯æŒæ‰¹é‡å›¾ç‰‡æ¨ç†ï¼Œå¯æŒ‡å®šå›¾ç‰‡è·¯å¾„ï¼Œæ•°æ®é›†æ‰€åœ¨æ–‡ä»¶å¤¹ï¼Œè§†é¢‘è·¯å¾„ç­‰ï¼›
- img-size: ç”¨äºæŒ‡å®šæ¨ç†çš„å›¾åƒå°ºå¯¸ï¼ˆé«˜ï¼Œå®½ï¼‰ï¼Œå¦‚(1280,1280)ï¼Œé»˜è®¤ä¸º(640,640)ï¼›
- yaml: ç”¨äºæŒ‡å®šæ•°æ®é›†é…ç½®æ–‡ä»¶ï¼Œä¸»è¦æ˜¯è·å–é…ç½®æ–‡ä»¶ä¸­çš„class_namesä»¥ä¾¿äºå¯è§†åŒ–æ—¶åŠ ä¸Šç±»åˆ«ä¿¡æ¯ï¼›
- conf: è®¾ç½®æ¨ç†é‡‡ç”¨çš„åˆ†æ•°é˜ˆå€¼ï¼Œé»˜è®¤ä¸º0.4ï¼›
- iou: è®¾ç½®æ¨ç†é‡‡ç”¨çš„ioué˜ˆå€¼ï¼Œé»˜è®¤ä¸º0.45ï¼›
- save-img: ä¿å­˜æ£€æµ‹æ¡†å¯è§†åŒ–åçš„å›¾ç‰‡ï¼Œé»˜è®¤æ‰“å¼€ï¼›
- save-txt: ä¿å­˜åŒ…æ‹¬æ£€æµ‹æ¡†çš„ä¿¡æ¯çš„txtæ–‡ä»¶ï¼Œé»˜è®¤å…³é—­ï¼›
- view-img: å±•ç¤ºæ£€æµ‹æ¡†å¯è§†åŒ–åçš„å›¾ç‰‡ï¼Œé»˜è®¤å…³é—­ï¼›
- classes: æŒ‡å®šå¯è§†åŒ–çš„ç±»åˆ«ï¼Œå¦‚æ— æŒ‡å®šï¼Œé»˜è®¤æ‰€æœ‰ç±»åˆ«å‡è¢«å¯è§†åŒ–ï¼›
- hide-labels: å¯è§†åŒ–ç›®æ ‡æ¡†æ—¶éšè—ç±»åˆ«ä¿¡æ¯ï¼Œé»˜è®¤å…³é—­ï¼›
- hide-conf: å¯è§†åŒ–ç›®æ ‡æ¡†æ—¶éšè—é¢„æµ‹åˆ†æ•°ä¿¡æ¯ï¼Œé»˜è®¤å…³é—­ï¼›
- name: æŒ‡å®šä¿å­˜å¯è§†åŒ–ç»“æœçš„æ–‡ä»¶å¤¹ï¼Œä¼šè‡ªåŠ¨åˆ›å»ºï¼Œé»˜è®¤ä¸ºâ€˜expâ€™ã€‚
```
è¿è¡Œåï¼Œåœ¨`runs/inference/exp`ç›®å½•ä¸‹èƒ½çœ‹åˆ°å¯¹åº”çš„å¯è§†åŒ–ç»“æœã€‚

<p align="center">
  <img src="https://raw.githubusercontent.com/meituan/YOLOv6/dbfd795a316e6e3a093bb04415e5ab32cf8780b3/assets/image3.jpg" align="middle" width = "400" height = "500" />
</p>



